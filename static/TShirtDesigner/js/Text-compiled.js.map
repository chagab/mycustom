{"version":3,"sources":["Text.es6"],"names":["Text","designer","x","y","fontSize","width","height","right","bottom","textColor","draggingText","draggingResizerText","resizerRadius","rr","nb","text","length","content","xRot","yRot","aRot","hitText","hit","ct","anchorHitTestText","dx","dy","drawDragAnchor","fill","ctx","beginPath","arc","Math","PI","closePath","drawDragging","X","Y","Right","Bottom","moveTo","lineTo","strokeStyle","stroke","dragg","e","ratio","mouseX","mouseY","frameCount","history","saveState","startX","startY"],"mappings":"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","file":"Text-compiled.js","sourcesContent":["function Text(designer) {\n\tthis.x = 150;\n\tthis.y = 150;\n\tthis.fontSize = 32;\n\tthis.width = 100;\n\tthis.height = 15;\n\tthis.right = this.x + this.width;\n\tthis.bottom = this.y + this.height;\n\tthis.textColor = [0, 0, 0];\n\tthis.draggingText = false;\n\tthis.draggingResizerText;\n\tthis.resizerRadius = 8;\n\tthis.rr = this.resizerRadius * this.resizerRadius;\n\tthis.nb = designer.text.length;\n\tthis.content = \"\";\n\tthis.xRot = 0;\n\tthis.yRot = 0;\n\tthis.aRot = 0;\n\tthis.hitText = function(x, y) {\n\t\t//////////////////////////////////////////////////////////////////////\n\t\t//methode that return true if the text what hit and wrong otherwise//\n\t\t//it also change the current text of the designer !\t\t\t\t//\n\t\t//////////////////////////////////////////////////////////////////////\n\t\tvar hit = (x > this.x && x < this.x + this.width && y > this.y && y < this.y + this.height);\n\t\tif (hit) designer.ct = this.nb;\n\t\treturn hit;\n\t}\n\tthis.anchorHitTestText = function(x, y) {\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t//methode that return the \"index\" of the anchor that was hit and -1 otherwise//\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\tvar dx = x - this.x;\n\t\tvar dy = y - this.y;\n\t\t// top-left\n\t\tif (dx * dx + dy * dy <= this.rr) {\n\t\t\treturn (0);\n\t\t}\n\t\t// top-right\n\t\tdx = x - this.right;\n\t\tdy = y - this.y;\n\t\tif (dx * dx + dy * dy <= this.rr) {\n\t\t\treturn (1);\n\t\t}\n\t\t// bottom-right\n\t\tdx = x - this.right;\n\t\tdy = y - this.bottom;\n\t\tif (dx * dx + dy * dy <= this.rr) {\n\t\t\treturn (2);\n\t\t}\n\t\t// bottom-left\n\t\tdx = x - this.x;\n\t\tdy = y - this.bottom;\n\t\tif (dx * dx + dy * dy <= this.rr) {\n\t\t\treturn (3);\n\t\t}\n\t\treturn (-1);\n\t}\n\tthis.drawDragAnchor = function(x, y) {\n\t\t///////////////////////////////\n\t\t//methode that draw an anchor//\n\t\t///////////////////////////////\n\t\tfill(0);\n\t\tdesigner.ctx.beginPath();\n\t\tdesigner.ctx.arc(x, y, this.resizerRadius, 0, Math.PI * 2, false);\n\t\tdesigner.ctx.closePath();\n\t\tdesigner.ctx.fill();\n\t}\n\tthis.drawDragging = function(X, Y, Right, Bottom) {\n\t\t////////////////////////////////////////////////////////////////\n\t\t//methde that draw the anchor and the sqaure around the text //\n\t\t////////////////////////////////////////////////////////////////\n\t\tdesigner.ctx.beginPath();\n\t\tdesigner.ctx.moveTo(X, Y);\n\t\tdesigner.ctx.lineTo(Right, Y);\n\t\tdesigner.ctx.lineTo(Right, Bottom);\n\t\tdesigner.ctx.lineTo(X, Bottom);\n\t\tdesigner.ctx.closePath();\n\t\tdesigner.ctx.strokeStyle = '#0';\n\t\tdesigner.ctx.stroke();\n\t\tthis.drawDragAnchor(X, Y);\n\t\tthis.drawDragAnchor(Right, Y);\n\t\tthis.drawDragAnchor(Right, Bottom);\n\t\tthis.drawDragAnchor(X, Bottom);\n\t}\n\tthis.dragg = function(e) {\n\t\t/////////////////////////////////////////////////\n\t\t//methode that allow the user to drag the text//\n\t\t/////////////////////////////////////////////////\n\t\tif (this.draggingResizerText > -1) {\n\t\t\t// resize the text\n\t\t\tvar ratio = 0;\n\t\t\tswitch (this.draggingResizerText) {\n\t\t\t\tcase 0:\n\t\t\t\t\t//top-left\n\t\t\t\t\tthis.x = mouseX;\n\t\t\t\t\tthis.y = mouseY;\n\t\t\t\t\tratio = (this.bottom - mouseY) / this.height;\n\t\t\t\t\tthis.height = this.bottom - mouseY;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\t//top-right\n\t\t\t\t\tthis.y = mouseY;\n\t\t\t\t\tratio = (this.bottom - mouseY) / this.height;\n\t\t\t\t\tthis.height = this.bottom - mouseY;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\t//bottom-right\n\t\t\t\t\tratio = (mouseY - this.y) / this.height;\n\t\t\t\t\tthis.height = mouseY - this.y;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\t//bottom-left\n\t\t\t\t\tthis.x = mouseX;\n\t\t\t\t\tratio = (mouseY - this.y) / this.height;\n\t\t\t\t\tthis.height = mouseY - this.y;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.width *= ratio;\n\t\t\t// set the text right and bottom\n\t\t\tthis.right = this.x + this.width;\n\t\t\tthis.bottom = this.y + this.height;\n\t\t\tif (frameCount % 25 == 1) designer.history.saveState();\n\t\t}\n\t\t//if the user want to move the image\n\t\telse if (this.draggingText) {\n\t\t\t// move the text by the amount of the latest drag\n\t\t\tvar dx = mouseX - designer.startX;\n\t\t\tvar dy = mouseY - designer.startY;\n\t\t\tthis.x += dx;\n\t\t\tthis.y += dy;\n\t\t\tthis.right += dx;\n\t\t\tthis.bottom += dy;\n\t\t\t// reset the startXY for next time\n\t\t\tdesigner.startX = mouseX;\n\t\t\tdesigner.startY = mouseY;\n\t\t\tif (frameCount % 25 == 1) designer.history.saveState();\n\t\t}\n\t}\n}"]}