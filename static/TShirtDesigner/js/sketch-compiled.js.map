{"version":3,"sources":["sketch.es6"],"names":["d","path","colorPicker_OnClick","color","f","document","createElement","style","body","appendChild","rgbValue","window","getComputedStyle","split","text","ct","textColor","Number","slice","length","changeProdcut","number","face","loadImage","path1","dos","droite","gauche","button","fond","onFileSelected","event","image","Image","src","target","result","console","log","files","gotfile","file","droped","ci","logo","pop","Logo","push","history","saveState","slider","value","width","height","input","setup","Designer","font","loadFont","getElementById","innerHTML","windowHeight","navigator","appVersion","indexOf","OSName","canvas","createCanvas","canvasWidth","size","canvasHeight","ctx","elt","getContext","canvasOffset","position","offsetX","x","offsetY","y","ratio","right","bottom","Text","textareas","p5","Element","buttons","sliders","inputs","textarea","Position","drop","mousePressed","e","startX","mouseX","startY","mouseY","forEach","draggingResizer","anchorHitTestImage","draggingImage","hitImage","draggingResizerText","anchorHitTestText","draggingText","hitText","mouseMoved","outOfCanvas","dragg","addEventListener","mouseOut","focus","id","parent","modal","display","close","getElementsByClassName","i","onclick","onchange","conserverRatio","checked","onfocus","onkeydown","evtobj","keyCode","ctrlKey","undo","shiftKey","redo","metaKey","draw","inSquare","background","textFont","textAlign","CENTER","translate","textSize","fontSize","rotate","aRot","fill","content","nb","Math","max","apply","escape","map","textWidth","w","drawDragging","floor","drawImage","xRot","cos","yRot","sin","atan2","parentElement","nextElementSibling","firstChild","keyIsDown","LEFT_ARROW","ENTER","aImage","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","stroke","rect","strokeWeight","line"],"mappings":"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","file":"sketch-compiled.js","sourcesContent":["var d;\nvar path;\n\nfunction colorPicker_OnClick(color) {\n\tvar f = document.createElement(\"div\");\n\tf.style.color = color;\n\tdocument.body.appendChild(f);\n\trgbValue = window.getComputedStyle(f).color.split(\", \");\n\t//delete f;\n\td.text[d.ct].textColor[0] = Number(rgbValue[0].slice(4));\n\td.text[d.ct].textColor[1] = Number(rgbValue[1]);\n\td.text[d.ct].textColor[2] = Number(rgbValue[2].slice(0, rgbValue[2].length - 1));\n}\n\nfunction changeProdcut(number) {\n\td.face = loadImage(path1 + number + \"-face.png\");\n\td.dos = loadImage(path1 + number + \"-dos.png\");\n\td.droite = loadImage(path1 + number + \"-droite.png\");\n\td.gauche = loadImage(path1 + number + \"-gauche.png\");\n\td.button('face').style('background-image', \"url('\" + path1 + number + \"-face.png')\");\n\td.button('dos').style('background-image', \"url('\" + path1 + number + \"-dos.png')\");\n\td.button('droite').style('background-image', \"url('\" + path1 + number + \"-droite.png')\");\n\td.button('gauche').style('background-image', \"url('\" + path1 + number + \"-gauche.png')\");\n\td.fond = d.face;\n}\n\nfunction onFileSelected(event) {\n\t//var selectedFile = event.target.files[0];\n\t//var reader = new FileReader();\n\t//reader.onload = function(event) {\n\tvar image = new Image();\n\timage.src = event.target.result;\n\tconsole.log(event.target);\n\tconsole.log(event.target.files);\n\tconsole.log(event.target.result);\n\tgotfile(image);\n\t//};\n}\n\nfunction gotfile(file) {\n\tconsole.log('droped');\n\td.droped = true;\n\tif (d.ci == 0 && d.logo[d.ci].image.src == \"\") {\n\t\td.logo.pop();\n\t\td.logo[0] = new Logo(file, d);\n\t} else {\n\t\td.logo.push(new Logo(file, d));\n\t\td.ci++;\n\t}\n\t//on enregistre l'état du logo une première fois\n\td.history.saveState();\n\t//mettre à jour les sliders et les inputs\n\td.slider('largeurImage').value(d.logo[d.ci].width);\n\td.slider('hauteurImage').value(d.logo[d.ci].height);\n\td.input('largeurImageSetting').value(d.logo[d.ci].width);\n\td.input('hauteurImageSetting').value(d.logo[d.ci].height);\n}\n\nfunction setup() {\n\td = new Designer();\n\t//on ajoute une image vide en premier\n\tconst path = \"../../../static/mySelf/image/TshirtDesigner/\";\n\tconst path1 = \"../../../media/achetez/produit/\";\n\td.font = loadFont('../../../static/mySelf/css/Caviar-Dreams-fontfacekit/web_fonts/caviardreams_regular_macroman/CaviarDreams-webfont.ttf');\n\td.face = loadImage((path1 + document.getElementById(\"fond_id\").innerHTML + \"-face.png\"));\n\td.dos = loadImage((path1 + document.getElementById(\"fond_id\").innerHTML + \"-dos.png\"));\n\td.droite = loadImage((path1 + document.getElementById(\"fond_id\").innerHTML + \"-droite.png\"));\n\td.gauche = loadImage((path1 + document.getElementById(\"fond_id\").innerHTML + \"-gauche.png\"));\n\td.fond = d.face;\n\t//taille minimale de la page\n\tdocument.getElementById(\"conteneur\").style.height = windowHeight + 300 + \"px\";\n\t//pour cmd+Z ou ctrl+z suivant les os\n\tif (navigator.appVersion.indexOf(\"Win\") != -1) d.OSName = \"Windows\";\n\tif (navigator.appVersion.indexOf(\"Mac\") != -1) d.OSName = \"MacOS\";\n\tif (navigator.appVersion.indexOf(\"X11\") != -1) d.OSName = \"UNIX\";\n\tif (navigator.appVersion.indexOf(\"Linux\") != -1) d.OSName = \"Linux\";\n\td.canvas = createCanvas(4 * windowHeight / 5, 4 * windowHeight / 5);\n\tvar canvasWidth = d.canvas.size().width;\n\tvar canvasHeight = d.canvas.size().height;\n\t// on initialise tout ce qu'il faut dans le designer\n\td.ctx = d.canvas.elt.getContext(\"2d\");\n\td.canvasOffset = d.canvas.position();\n\td.offsetX = d.canvasOffset.x;\n\td.offsetY = d.canvasOffset.y;\n\t//on met un logo vide dans le tableau de logo pour que la compilation fonctionne et on le place dans le carré pour qu'il\n\t//ne soit pas rouge\n\td.logo.push(new Logo(\"\", d));\n\td.logo[0].ratio = 1;\n\td.logo[0].x = width / 2;\n\td.logo[0].y = height / 2;\n\td.logo[0].width = 25;\n\td.logo[0].height = 25;\n\td.logo[0].right = d.logo[0].x + d.logo[0].width;\n\td.logo[0].bottom = d.logo[0].y + d.logo[0].height;\n\td.text.push(new Text(d));\n\t///////////////////////////////////////////////////\n\t// on ajoute dans le designer les éléments du DOM//\n\t///////////////////////////////////////////////////\n\td.textareas.push(new p5.Element(document.getElementById(\"first\")));\n\td.buttons.push(new p5.Element(document.getElementById('buttonNb')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonProduit')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonImage')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonText')));\n\td.buttons.push(new p5.Element(document.getElementById('face')));\n\td.buttons.push(new p5.Element(document.getElementById('dos')));\n\td.buttons.push(new p5.Element(document.getElementById('droite')));\n\td.buttons.push(new p5.Element(document.getElementById('gauche')));\n\td.buttons.push(new p5.Element(document.getElementById('choixDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('choixParametreDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('choixCouleurDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('choixTexte')));\n\td.buttons.push(new p5.Element(document.getElementById('choixParametreTexte')));\n\td.buttons.push(new p5.Element(document.getElementById('choixCouleurTexte')));\n\td.buttons.push(new p5.Element(document.getElementById('ajoutText')));\n\td.sliders.push(new p5.Element(document.getElementById('tailleTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('orientationTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('xTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('yTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('tailleImage')));\n\td.sliders.push(new p5.Element(document.getElementById('orientationImage')));\n\td.sliders.push(new p5.Element(document.getElementById('xImage')));\n\td.sliders.push(new p5.Element(document.getElementById('yImage')));\n\td.sliders.push(new p5.Element(document.getElementById('largeurImage')));\n\td.sliders.push(new p5.Element(document.getElementById('hauteurImage')));\n\td.sliders.push(new p5.Element(document.getElementById('largeurTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('hauteurTexte')));\n\td.inputs.push(new p5.Element(document.getElementById('xImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('yImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('largeurImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('hauteurImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('xTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('yTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('largeurTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('hauteurTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('ratio')));\n\td.inputs.push(new p5.Element(document.getElementById('quadrillage')));\n\td.inputs.push(new p5.Element(document.getElementById('quadrillageTexte')));\n\td.textarea('first').size(300, 35).value('Ajoutez du texte sur votre CUSTOM !');\n\td.Position();\n\t///////////////////////////\n\t// gestion des evenements//\n\t///////////////////////////\n\td.canvas.drop(gotfile);\n\td.canvas.mousePressed(function(e) {\n\t\td.startX = mouseX;\n\t\td.startY = mouseY;\n\t\td.logo.forEach(function(e) {\n\t\t\te.draggingResizer = e.anchorHitTestImage(d.startX, d.startY);\n\t\t\te.draggingImage = e.draggingResizer < 0 && e.hitImage(d.startX, d.startY);\n\t\t});\n\t\td.text.forEach(function(e) {\n\t\t\te.draggingResizerText = e.anchorHitTestText(d.startX, d.startY);\n\t\t\te.draggingText = e.draggingResizerText < 0 && d.text[d.ct].hitText(d.startX, d.startY);\n\t\t});\n\t});\n\td.canvas.mouseMoved(function(e) {\n\t\td.outOfCanvas = false;\n\t\td.logo[d.ci].dragg(e);\n\t\td.text[d.ct].dragg(e);\n\t\t//on actualise les sliders pour les logos\n\t\td.slider('xImage').value(d.logo[d.ci].x);\n\t\td.slider('yImage').value(d.logo[d.ci].y);\n\t\td.slider('largeurImage').value(d.logo[d.ci].width);\n\t\td.slider('hauteurImage').value(d.logo[d.ci].height);\n\t\t//on actualise les sliders pour les texte\n\t\td.slider('xTexte').value(d.text[d.ct].x);\n\t\td.slider('yTexte').value(d.text[d.ct].y);\n\t\td.slider('largeurTexte').value(d.text[d.ct].width);\n\t\td.slider('hauteurTexte').value(d.text[d.ct].height);\n\t});\n\td.canvas.elt.addEventListener('mouseup', function(e) {\n\t\td.logo[d.ci].draggingResizer = -1;\n\t\td.logo[d.ci].draggingImage = false;\n\t\td.text[d.ct].draggingResizerText = -1;\n\t\td.text[d.ct].draggingText = false;\n\t});\n\td.canvas.mouseOut(function(e) {\n\t\td.logo[d.ci].draggingResizer = -1;\n\t\td.logo[d.ci].draggingImage = false;\n\t\td.text[d.ct].draggingResizerText = -1;\n\t\td.text[d.ct].draggingText = false;\n\t\td.outOfCanvas = true;\n\t\td.history.saveState();\n\t});\n\td.button('ajoutText').mousePressed(function() {\n\t\tif (d.textarea('first').value() == 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t\td.textarea('first').value('');\n\t\t\td.textarea('first').elt.focus();\n\t\t} else {\n\t\t\td.textareas.push(createElement('textarea').id('textarea' + d.ct));\n\t\t\td.textarea('first').parent().appendChild(d.textarea('textarea' + d.ct).elt);\n\t\t}\n\t\tif (d.ct < 9) d.ct++;\n\t\telse d.ct = 9;\n\t\td.text.push(new Text(d));\n\t});\n\td.button('face').mousePressed(function() {\n\t\td.fond = d.face;\n\t});\n\td.button('dos').mousePressed(function() {\n\t\td.fond = d.dos;\n\t});\n\td.button('droite').mousePressed(function() {\n\t\td.fond = d.droite;\n\t});\n\td.button('gauche').mousePressed(function() {\n\t\td.fond = d.gauche;\n\t});\n\td.button('buttonDesign').mousePressed(function() {\n\t\td.modal('modalDesign');\n\t});\n\td.button('buttonText').mousePressed(function() {\n\t\td.modal('modalTexte');\n\t});\n\td.button('buttonProduit').mousePressed(function() {\n\t\td.modal('modalProduit');\n\t});\n\td.button('buttonNb').mousePressed(function() {\n\t\td.modal('modalNb');\n\t});\n\td.button('choixDesign').mousePressed(function() {\n\t\tdocument.getElementById('choisiDesign').style.display = \"block\";\n\t\tdocument.getElementById('choisiParametreDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurDesign').style.display = \"none\";\n\t});\n\td.button('choixParametreDesign').mousePressed(function() {\n\t\tdocument.getElementById('choisiDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreDesign').style.display = \"block\";\n\t\tdocument.getElementById('choisiCouleurDesign').style.display = \"none\";\n\t});\n\td.button('choixCouleurDesign').mousePressed(function() {\n\t\tdocument.getElementById('choisiDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurDesign').style.display = \"block\";\n\t});\n\td.button('choixTexte').mousePressed(function() {\n\t\tdocument.getElementById('choisiTexte').style.display = \"block\";\n\t\tdocument.getElementById('choisiParametreTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurTexte').style.display = \"none\";\n\t});\n\td.button('choixParametreTexte').mousePressed(function() {\n\t\tdocument.getElementById('choisiTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreTexte').style.display = \"block\";\n\t\tdocument.getElementById('choisiCouleurTexte').style.display = \"none\";\n\t});\n\td.button('choixCouleurTexte').mousePressed(function() {\n\t\tdocument.getElementById('choisiTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurTexte').style.display = \"block\";\n\t});\n\tvar close = document.getElementsByClassName('close');\n\tfor (var i = 0; i < close.length; i++) {\n\t\tclose[i].onclick = function() {\n\t\t\td.modal();\n\t\t}\n\t};\n\td.slider('xImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('yImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('largeurImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('hauteurImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('xTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('yTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('largeurTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('hauteurTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.input('xImageSetting').elt.onchange = function() {\n\t\td.slider('xImage').value(this.value);\n\t\td.logo[d.ci].x = this.value;\n\t\td.history.saveState();\n\t};\n\td.input('yImageSetting').elt.onchange = function() {\n\t\td.slider('yImage').value(this.value);\n\t\td.logo[d.ci].y = this.value;\n\t\td.history.saveState();\n\t}\n\td.input('largeurImageSetting').elt.onchange = function() {\n\t\td.slider('largeurImage').value(this.value);\n\t\td.logo[d.ci].width = this.value;\n\t\td.logo[d.ci].right = d.logo[d.ci].x + d.logo[d.ci].width;\n\t\td.history.saveState();\n\t}\n\td.input('hauteurImageSetting').elt.onchange = function() {\n\t\td.slider('hauteurImage').value(this.value);\n\t\td.logo[d.ci].height = this.value;\n\t\td.logo[d.ci].bottom = d.logo[d.ci].y + d.logo[d.ci].height;\n\t\td.history.saveState();\n\t}\n\td.input('xTexteSetting').elt.onchange = function() {\n\t\td.slider('xTexte').value(this.value);\n\t\td.text[d.ct].x = this.value;\n\t\td.history.saveState();\n\t}\n\td.input('yTexteSetting').elt.onchange = function() {\n\t\td.slider('yTexte').value(this.value);\n\t\td.text[d.ct].y = this.value;\n\t\td.history.saveState();\n\t}\n\td.input('largeurTexteSetting').elt.onchange = function() {\n\t\td.slider('largeurTexte').value(this.value);\n\t\td.text[d.ct].width = this.value;\n\t\td.text[d.ct].right = d.text[d.ct].x + d.text[d.ct].width;\n\t\td.history.saveState();\n\t}\n\td.input('hauteurTexteSetting').elt.onchange = function() {\n\t\td.slider('hauteurTexte').value(this.value);\n\t\td.text[d.ct].height = this.value;\n\t\td.text[d.ct].bottom = d.text[d.ct].y + d.text[d.ct].height;\n\t\td.history.saveState();\n\t}\n\td.input('ratio').elt.onchange = function() {\n\t\td.conserverRatio = this.checked;\n\t}\n\td.textarea('first').elt.onfocus = function() {\n\t\tif (this.value == 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\tdocument.onkeydown = function(e) {\n\t\t////////////////////////////////////////\n\t\t//pour détecter les raccourcis clavier//\n\t\t////////////////////////////////////////\n\t\tvar evtobj = window.event ? event : e;\n\t\tif (d.OSName == \"Windows\" || d.OSName == \"Linux\" || d.OSName == \"UNIX\") {\n\t\t\tif (evtobj.keyCode == 90 && evtobj.ctrlKey) {\n\t\t\t\td.history.undo();\n\t\t\t}\n\t\t\tif (evtobj.keyCode == 90 && evtobj.ctrlKey && evtobj.shiftKey) {\n\t\t\t\td.history.redo();\n\t\t\t}\n\t\t}\n\t\tif (d.OSName == \"MacOS\") {\n\t\t\tif (evtobj.keyCode == 90 && evtobj.metaKey && !evtobj.shiftKey) {\n\t\t\t\td.history.undo();\n\t\t\t}\n\t\t\tif (evtobj.keyCode == 90 && evtobj.metaKey && evtobj.shiftKey) {\n\t\t\t\td.history.redo();\n\t\t\t}\n\t\t}\n\t\tif (evtobj.keyCode == 8 && evtobj.shiftKey) {\n\t\t\tif (d.ci > 1) {\n\t\t\t\td.ci--;\n\t\t\t\td.logo.pop();\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction draw() {\n\t/////////////////////////////////////\n\t//initialisation à chaque itération//\n\t/////////////////////////////////////\n\tvar inSquare;\n\td.canvasOffset = d.canvas.position();\n\td.offsetX = d.canvasOffset.x;\n\td.offsetY = d.canvasOffset.y;\n\td.Position();\n\tbackground(200);\n\tbackground(d.fond);\n\ttextFont(d.font);\n\ttextAlign(CENTER);\n\ttranslate(width / 2, height / 2);\n\t///////////////////////////////////////////////////////////////////////////////\n\t//s'il n'y a pas eu de modifications depuis le début du chargement de la page//\n\t///////////////////////////////////////////////////////////////////////////////\n\tif (!d.droped && d.textarea('first').value() == 'Ajoutez du texte sur votre CUSTOM !') {\n\t\ttextSize(d.text[d.ct].fontSize);\n\t\ttext('drop une image !', 0, 0);\n\t}\n\t////////////////////\n\t//gestion du texte//\n\t////////////////////\n\tif (d.textarea('first').value() != 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t//pour tous les textes\n\t\td.text.forEach(function(e) {\n\t\t\tpush();\n\t\t\trotate(e.aRot);\n\t\t\tfill(e.textColor[0], e.textColor[1], e.textColor[2]);\n\t\t\ttextSize(e.fontSize);\n\t\t\te.content = d.textareas[e.nb].value();\n\t\t\te.width = Math.max.apply(null, escape(e.content).split('%0A').map(w => textWidth(w)));\n\t\t\te.height = escape(e.content).split('%0A').length * e.fontSize * 1.2;\n\t\t\te.right = e.x + e.width;\n\t\t\te.bottom = e.y + e.height;\n\t\t\ttext(e.content, e.x - width / 2, e.y - height / 2, e.width, e.height);\n\t\t\tif (e.hitText(d.startX, d.startY)) {\n\t\t\t\te.drawDragging(e.x - width / 2, e.y - height / 2, e.right - width / 2, e.bottom - height / 2);\n\t\t\t}\n\t\t\tpop();\n\t\t\tpush();\n\t\t\ttextSize(15);\n\t\t\tif (e.draggingResizerText > -1) {\n\t\t\t\ttext(Math.floor(e.width) + \" x \" + Math.floor(e.height), e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t} else if (e.hitText(d.startX, d.startY) && e.content != 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t\t\ttext(\"(\" + Math.floor(e.x) + \" ,\" + Math.floor(e.y) + \")\", e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t}\n\t\t\tpop();\n\t\t\tinSquare |= (e.x < (width / 4 + 15) || e.right > (3 * width / 4 - 15) || e.y < (height / 4) || e.bottom > (0.85 * height));\n\t\t});\n\t}\n\t//////////////////////\n\t//gestion de l'image//\n\t//////////////////////\n\tif (d.droped) {\n\t\t//pour toutes les images\n\t\td.logo.forEach(function(e) {\n\t\t\tpush();\n\t\t\trotate(e.aRot);\n\t\t\td.ctx.drawImage(e.image, 0, 0, e.image.width, e.image.height, e.x - width / 2, e.y - height / 2, e.width, e.height);\n\t\t\tif (e.hitImage(d.startX, d.startY)) {\n\t\t\t\te.drawDragging(e.x - width / 2, e.y - height / 2, e.right - width / 2, e.bottom - height / 2);\n\t\t\t}\n\t\t\ttextSize(15);\n\t\t\tif (e.draggingResizer > -1) {\n\t\t\t\ttext(Math.floor(e.width) + \" x \" + Math.floor(e.height), e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t} else if (e.hitImage(d.startX, d.startY) && e.image.src != \"\") {\n\t\t\t\ttext(\"(\" + Math.floor(e.x) + \" ,\" + Math.floor(e.y) + \")\", e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t}\n\t\t\tpop();\n\t\t\tif (d.logo[d.ci].src != '') {\n\t\t\t\tinSquare |= (e.x < (width / 4 + 15) || e.right > (3 * width / 4 - 15) || e.y < (height / 4) || e.bottom > (0.85 * height));\n\t\t\t}\n\t\t});\n\t}\n\t////////////////////////////////////////\n\t//gesetion des sliders \"en temps réel\"//\n\t////////////////////////////////////////\n\tif (d.outOfCanvas) {\n\t\t//on change la rotation de l'image\n\t\td.logo[d.ci].xRot = cos(d.slider('orientationImage').value() * 0.017453292519943);\n\t\td.logo[d.ci].yRot = sin(d.slider('orientationImage').value() * 0.017453292519943);\n\t\td.logo[d.ci].aRot = atan2(d.logo[d.ci].yRot, d.logo[d.ci].xRot);\n\t\t//on change la position de l'image\n\t\td.logo[d.ci].x = d.slider('xImage').value();\n\t\td.logo[d.ci].y = d.slider('yImage').value();\n\t\td.logo[d.ci].width = d.slider('largeurImage').value();\n\t\td.logo[d.ci].height = d.slider('hauteurImage').value();\n\t\t//on actualise les contours\n\t\td.logo[d.ci].right = d.logo[d.ci].x + d.logo[d.ci].width;\n\t\td.logo[d.ci].bottom = d.logo[d.ci].y + d.logo[d.ci].height;\n\t\t//on change la rotation du texte\n\t\td.text[d.ct].xRot = cos(d.slider('orientationTexte').value() * 0.017453292519943);\n\t\td.text[d.ct].yRot = sin(d.slider('orientationTexte').value() * 0.017453292519943);\n\t\td.text[d.ct].aRot = atan2(d.text[d.ct].yRot, d.text[d.ct].xRot);\n\t\t//on change la position de l'image\n\t\td.text[d.ct].x = d.slider('xTexte').value();\n\t\td.text[d.ct].y = d.slider('yTexte').value();\n\t\td.text[d.ct].width = d.slider('largeurTexte').value();\n\t\td.text[d.ct].height = d.slider('hauteurTexte').value();\n\t\td.text[d.ct].fontSize = d.slider('tailleTexte').value();\n\t\t//on actualise les contours\n\t\td.text[d.ct].right = d.text[d.ct].x + d.text[d.ct].width;\n\t\td.text[d.ct].bottom = d.text[d.ct].y + d.text[d.ct].height;\n\t} else {\n\t\td.sliders.forEach(function(e) {\n\t\t\t//console.log(e.elt.parentElement);\n\t\t\te.elt.parentElement.nextElementSibling.firstChild.value = e.value();\n\t\t});\n\t}\n\t///////////////////////\n\t//gestion des flèches//\n\t///////////////////////\n\tif (keyIsDown(LEFT_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {\n\t\t\tif (d.aImage < 360) d.aImage += 0.1;\n\t\t\tif (d.aImage >= 360) d.aImage = 360;\n\t\t} else {\n\t\t\td.logo[d.ci].x -= 2;\n\t\t\td.logo[d.ci].right -= 2;\n\t\t}\n\t}\n\tif (keyIsDown(RIGHT_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {\n\t\t\tif (d.aImage > 0) d.aImage -= 0.1;\n\t\t\tif (d.aImage <= 0) d.aImage = 0;\n\t\t} else {\n\t\t\td.logo[d.ci].x += 2;\n\t\t\td.logo[d.ci].right += 2;\n\t\t}\n\t}\n\tif (keyIsDown(UP_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {} else {\n\t\t\td.logo[d.ci].y -= 2;\n\t\t\td.logo[d.ci].bottom -= 2;\n\t\t}\n\t}\n\tif (keyIsDown(DOWN_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {} else {\n\t\t\td.logo[d.ci].y += 2;\n\t\t\td.logo[d.ci].bottom += 2;\n\t\t}\n\t}\n\t///////////////////////////////////////////\n\t//délimitation de l'espace pour les logos//\n\t///////////////////////////////////////////\n\tif (inSquare) {\n\t\tstroke(255, 0, 0);\n\t} else {\n\t\tstroke(0, 0, 0);\n\t}\n\tfill(0, 0, 0, 0);\n\trect(-width / 4 + 15, -height / 4, width / 2 - 30, height / 2 + 0.1 * height);\n\tif (d.input('quadrillage').elt.checked || d.input('quadrillageTexte').elt.checked) {\n\t\tpush();\n\t\tstroke(0, 0, 0);\n\t\tstrokeWeight(0.15);\n\t\tline(0, -height / 2, 0, height / 2);\n\t\tline(-width / 3, -height / 2, -width / 3, height / 2);\n\t\tline(width / 3, -height / 2, width / 3, height / 2);\n\t\tline(-width / 6, -height / 2, -width / 6, height / 2);\n\t\tline(width / 6, -height / 2, width / 6, height / 2);\n\t\tline(-width, height / 6, width, height / 6);\n\t\tline(-width, height / 3, width, height / 3);\n\t\tline(-width, -height / 3, width, -height / 3);\n\t\tline(-width, -height / 6, width, -height / 6);\n\t\tline(-width, 0, width, 0);\n\t\tpop();\n\t}\n}\n"]}