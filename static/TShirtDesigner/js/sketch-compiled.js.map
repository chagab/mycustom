{"version":3,"sources":["sketch.es6"],"names":["d","colorPicker_OnClick","color","f","document","createElement","style","body","appendChild","rgbValue","window","getComputedStyle","split","text","ct","textColor","Number","slice","length","changeProdcut","number","path","face","loadImage","dos","droite","gauche","button","fond","onFileSelected","event","image","Image","src","target","result","console","log","files","gotfile","file","droped","ci","logo","pop","Logo","push","history","saveState","slider","value","width","height","input","setup","Designer","font","loadFont","getElementById","innerHTML","windowHeight","navigator","appVersion","indexOf","OSName","canvas","createCanvas","canvasWidth","size","canvasHeight","ctx","elt","getContext","canvasOffset","position","offsetX","x","offsetY","y","ratio","right","bottom","Text","textareas","p5","Element","buttons","sliders","inputs","textarea","Position","drop","mousePressed","e","startX","mouseX","startY","mouseY","forEach","draggingResizer","anchorHitTestImage","draggingImage","hitImage","draggingResizerText","anchorHitTestText","draggingText","hitText","mouseMoved","outOfCanvas","dragg","addEventListener","mouseOut","focus","id","parent","modal","display","close","getElementsByClassName","i","onclick","onchange","conserverRatio","checked","onfocus","onkeydown","evtobj","keyCode","ctrlKey","undo","shiftKey","redo","metaKey","draw","inSquare","background","textFont","textAlign","CENTER","translate","textSize","fontSize","rotate","aRot","fill","content","nb","Math","max","apply","escape","map","textWidth","w","drawDragging","floor","drawImage","xRot","cos","yRot","sin","atan2","parentElement","nextElementSibling","firstChild","keyIsDown","LEFT_ARROW","ENTER","aImage","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","stroke","rect","strokeWeight","line"],"mappings":"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","file":"sketch-compiled.js","sourcesContent":["let d;\n\nfunction colorPicker_OnClick(color) {\n\tlet f = document.createElement(\"div\");\n\tf.style.color = color;\n\tdocument.body.appendChild(f);\n\tlet rgbValue = window.getComputedStyle(f).color.split(\", \");\n\t//delete f;\n\td.text[d.ct].textColor[0] = Number(rgbValue[0].slice(4));\n\td.text[d.ct].textColor[1] = Number(rgbValue[1]);\n\td.text[d.ct].textColor[2] = Number(rgbValue[2].slice(0, rgbValue[2].length - 1));\n}\n\nfunction changeProdcut(number) {\n\tconst path = \"/media/achetez/produit/\";\n\td.face = loadImage(path + number + \"-face.png\");\n\td.dos = loadImage(path + number + \"-dos.png\");\n\td.droite = loadImage(path + number + \"-droite.png\");\n\td.gauche = loadImage(path + number + \"-gauche.png\");\n\td.button('face').style('background-image', \"url('\" + path + number + \"-face.png')\");\n\td.button('dos').style('background-image', \"url('\" + path + number + \"-dos.png')\");\n\td.button('droite').style('background-image', \"url('\" + path + number + \"-droite.png')\");\n\td.button('gauche').style('background-image', \"url('\" + path + number + \"-gauche.png')\");\n\td.fond = d.face;\n}\n\nfunction onFileSelected(event) {\n\t//var selectedFile = event.target.files[0];\n\t//var reader = new FileReader();\n\t//reader.onload = function(event) {\n\tlet image = new Image();\n\timage.src = event.target.result;\n\tconsole.log(event.target);\n\tconsole.log(event.target.files);\n\tconsole.log(event.target.result);\n\tgotfile(image);\n\t//};\n}\n\nfunction gotfile(file) {\n\tconsole.log('droped');\n\td.droped = true;\n\tif (d.ci == 0 && d.logo[d.ci].image.src == \"\") {\n\t\td.logo.pop();\n\t\td.logo[0] = new Logo(file, d);\n\t} else {\n\t\td.logo.push(new Logo(file, d));\n\t\td.ci++;\n\t}\n\t//on enregistre l'état du logo une première fois\n\td.history.saveState();\n\t//mettre à jour les sliders et les inputs\n\td.slider('largeurImage').value(d.logo[d.ci].width);\n\td.slider('hauteurImage').value(d.logo[d.ci].height);\n\td.input('largeurImageSetting').value(d.logo[d.ci].width);\n\td.input('hauteurImageSetting').value(d.logo[d.ci].height);\n}\n\nfunction setup() {\n\td = new Designer();\n\t//on ajoute une image vide en premier\n\tconst path = \"/media/achetez/produit/\";\n\td.font = loadFont('/static/font/Caviar-Dreams/web_fonts/caviardreams_regular_macroman/CaviarDreams-webfont.ttf');\n\td.face = loadImage((path + document.getElementById(\"fond_id\").innerHTML + \"-face.png\"));\n\td.dos = loadImage((path + document.getElementById(\"fond_id\").innerHTML + \"-dos.png\"));\n\td.droite = loadImage((path + document.getElementById(\"fond_id\").innerHTML + \"-droite.png\"));\n\td.gauche = loadImage((path + document.getElementById(\"fond_id\").innerHTML + \"-gauche.png\"));\n\td.fond = d.face;\n\t//taille minimale de la page\n\tdocument.getElementById(\"conteneur\").style.height = windowHeight + 300 + \"px\";\n\t//pour cmd+Z ou ctrl+z suivant les os\n\tif (navigator.appVersion.indexOf(\"Win\") != -1) d.OSName = \"Windows\";\n\tif (navigator.appVersion.indexOf(\"Mac\") != -1) d.OSName = \"MacOS\";\n\tif (navigator.appVersion.indexOf(\"X11\") != -1) d.OSName = \"UNIX\";\n\tif (navigator.appVersion.indexOf(\"Linux\") != -1) d.OSName = \"Linux\";\n\td.canvas = createCanvas(4 * windowHeight / 5, 4 * windowHeight / 5);\n\tconst canvasWidth = d.canvas.size().width;\n\tconst canvasHeight = d.canvas.size().height;\n\t// on initialise tout ce qu'il faut dans le designer\n\td.ctx = d.canvas.elt.getContext(\"2d\");\n\td.canvasOffset = d.canvas.position();\n\td.offsetX = d.canvasOffset.x;\n\td.offsetY = d.canvasOffset.y;\n\t//on met un logo vide dans le tableau de logo pour que la compilation fonctionne et on le place dans le carré pour qu'il\n\t//ne soit pas rouge\n\td.logo.push(new Logo(\"\", d));\n\td.logo[0].ratio = 1;\n\td.logo[0].x = width / 2;\n\td.logo[0].y = height / 2;\n\td.logo[0].width = 25;\n\td.logo[0].height = 25;\n\td.logo[0].right = d.logo[0].x + d.logo[0].width;\n\td.logo[0].bottom = d.logo[0].y + d.logo[0].height;\n\td.text.push(new Text(d));\n\t///////////////////////////////////////////////////\n\t// on ajoute dans le designer les éléments du DOM//\n\t///////////////////////////////////////////////////\n\td.textareas.push(new p5.Element(document.getElementById(\"first\")));\n\td.buttons.push(new p5.Element(document.getElementById('buttonNb')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonProduit')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonImage')));\n\td.buttons.push(new p5.Element(document.getElementById('buttonText')));\n\td.buttons.push(new p5.Element(document.getElementById('face')));\n\td.buttons.push(new p5.Element(document.getElementById('dos')));\n\td.buttons.push(new p5.Element(document.getElementById('droite')));\n\td.buttons.push(new p5.Element(document.getElementById('gauche')));\n\td.buttons.push(new p5.Element(document.getElementById('choixDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('choixParametreDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('choixCouleurDesign')));\n\td.buttons.push(new p5.Element(document.getElementById('choixTexte')));\n\td.buttons.push(new p5.Element(document.getElementById('choixParametreTexte')));\n\td.buttons.push(new p5.Element(document.getElementById('choixCouleurTexte')));\n\td.buttons.push(new p5.Element(document.getElementById('ajoutText')));\n\td.sliders.push(new p5.Element(document.getElementById('tailleTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('orientationTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('xTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('yTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('tailleImage')));\n\td.sliders.push(new p5.Element(document.getElementById('orientationImage')));\n\td.sliders.push(new p5.Element(document.getElementById('xImage')));\n\td.sliders.push(new p5.Element(document.getElementById('yImage')));\n\td.sliders.push(new p5.Element(document.getElementById('largeurImage')));\n\td.sliders.push(new p5.Element(document.getElementById('hauteurImage')));\n\td.sliders.push(new p5.Element(document.getElementById('largeurTexte')));\n\td.sliders.push(new p5.Element(document.getElementById('hauteurTexte')));\n\td.inputs.push(new p5.Element(document.getElementById('xImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('yImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('largeurImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('hauteurImageSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('xTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('yTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('largeurTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('hauteurTexteSetting')));\n\td.inputs.push(new p5.Element(document.getElementById('ratio')));\n\td.inputs.push(new p5.Element(document.getElementById('quadrillage')));\n\td.inputs.push(new p5.Element(document.getElementById('quadrillageTexte')));\n\td.textarea('first').size(300, 35).value('Ajoutez du texte sur votre CUSTOM !');\n\td.Position();\n\t///////////////////////////\n\t// gestion des evenements//\n\t///////////////////////////\n\td.canvas.drop(gotfile);\n\td.canvas.mousePressed(function(e) {\n\t\td.startX = mouseX;\n\t\td.startY = mouseY;\n\t\td.logo.forEach(function(e) {\n\t\t\te.draggingResizer = e.anchorHitTestImage(d.startX, d.startY);\n\t\t\te.draggingImage = e.draggingResizer < 0 && e.hitImage(d.startX, d.startY);\n\t\t});\n\t\td.text.forEach(function(e) {\n\t\t\te.draggingResizerText = e.anchorHitTestText(d.startX, d.startY);\n\t\t\te.draggingText = e.draggingResizerText < 0 && d.text[d.ct].hitText(d.startX, d.startY);\n\t\t});\n\t});\n\td.canvas.mouseMoved(function(e) {\n\t\td.outOfCanvas = false;\n\t\td.logo[d.ci].dragg(e);\n\t\td.text[d.ct].dragg(e);\n\t\t//on actualise les sliders pour les logos\n\t\td.slider('xImage').value(d.logo[d.ci].x);\n\t\td.slider('yImage').value(d.logo[d.ci].y);\n\t\td.slider('largeurImage').value(d.logo[d.ci].width);\n\t\td.slider('hauteurImage').value(d.logo[d.ci].height);\n\t\t//on actualise les sliders pour les texte\n\t\td.slider('xTexte').value(d.text[d.ct].x);\n\t\td.slider('yTexte').value(d.text[d.ct].y);\n\t\td.slider('largeurTexte').value(d.text[d.ct].width);\n\t\td.slider('hauteurTexte').value(d.text[d.ct].height);\n\t});\n\td.canvas.elt.addEventListener('mouseup', function(e) {\n\t\td.logo[d.ci].draggingResizer = -1;\n\t\td.logo[d.ci].draggingImage = false;\n\t\td.text[d.ct].draggingResizerText = -1;\n\t\td.text[d.ct].draggingText = false;\n\t});\n\td.canvas.mouseOut(function(e) {\n\t\td.logo[d.ci].draggingResizer = -1;\n\t\td.logo[d.ci].draggingImage = false;\n\t\td.text[d.ct].draggingResizerText = -1;\n\t\td.text[d.ct].draggingText = false;\n\t\td.outOfCanvas = true;\n\t\td.history.saveState();\n\t});\n\td.button('ajoutText').mousePressed(function() {\n\t\tif (d.textarea('first').value() == 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t\td.textarea('first').value('');\n\t\t\td.textarea('first').elt.focus();\n\t\t} else {\n\t\t\td.textareas.push(createElement('textarea').id('textarea' + d.ct));\n\t\t\td.textarea('first').parent().appendChild(d.textarea('textarea' + d.ct).elt);\n\t\t}\n\t\tif (d.ct < 9) d.ct++;\n\t\telse d.ct = 9;\n\t\td.text.push(new Text(d));\n\t});\n\td.button('face').mousePressed(function() {\n\t\td.fond = d.face;\n\t});\n\td.button('dos').mousePressed(function() {\n\t\td.fond = d.dos;\n\t});\n\td.button('droite').mousePressed(function() {\n\t\td.fond = d.droite;\n\t});\n\td.button('gauche').mousePressed(function() {\n\t\td.fond = d.gauche;\n\t});\n\td.button('buttonDesign').mousePressed(function() {\n\t\td.modal('modalDesign');\n\t});\n\td.button('buttonText').mousePressed(function() {\n\t\td.modal('modalTexte');\n\t});\n\td.button('buttonProduit').mousePressed(function() {\n\t\td.modal('modalProduit');\n\t});\n\td.button('buttonNb').mousePressed(function() {\n\t\td.modal('modalNb');\n\t});\n\td.button('choixDesign').mousePressed(function() {\n\t\tdocument.getElementById('choisiDesign').style.display = \"block\";\n\t\tdocument.getElementById('choisiParametreDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurDesign').style.display = \"none\";\n\t});\n\td.button('choixParametreDesign').mousePressed(function() {\n\t\tdocument.getElementById('choisiDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreDesign').style.display = \"block\";\n\t\tdocument.getElementById('choisiCouleurDesign').style.display = \"none\";\n\t});\n\td.button('choixCouleurDesign').mousePressed(function() {\n\t\tdocument.getElementById('choisiDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreDesign').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurDesign').style.display = \"block\";\n\t});\n\td.button('choixTexte').mousePressed(function() {\n\t\tdocument.getElementById('choisiTexte').style.display = \"block\";\n\t\tdocument.getElementById('choisiParametreTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurTexte').style.display = \"none\";\n\t});\n\td.button('choixParametreTexte').mousePressed(function() {\n\t\tdocument.getElementById('choisiTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreTexte').style.display = \"block\";\n\t\tdocument.getElementById('choisiCouleurTexte').style.display = \"none\";\n\t});\n\td.button('choixCouleurTexte').mousePressed(function() {\n\t\tdocument.getElementById('choisiTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiParametreTexte').style.display = \"none\";\n\t\tdocument.getElementById('choisiCouleurTexte').style.display = \"block\";\n\t});\n\tconst close = document.getElementsByClassName('close');\n\tfor (let i = 0; i < close.length; i++) {\n\t\tclose[i].onclick = function() {\n\t\t\td.modal();\n\t\t}\n\t};\n\td.slider('xImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('yImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('largeurImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('hauteurImage').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('xTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('yTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('largeurTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.slider('hauteurTexte').elt.onchange = function() {\n\t\td.history.saveState();\n\t}\n\td.input('xImageSetting').elt.onchange = function() {\n\t\td.slider('xImage').value(this.value);\n\t\td.logo[d.ci].x = this.value;\n\t\td.history.saveState();\n\t};\n\td.input('yImageSetting').elt.onchange = function() {\n\t\td.slider('yImage').value(this.value);\n\t\td.logo[d.ci].y = this.value;\n\t\td.history.saveState();\n\t}\n\td.input('largeurImageSetting').elt.onchange = function() {\n\t\td.slider('largeurImage').value(this.value);\n\t\td.logo[d.ci].width = this.value;\n\t\td.logo[d.ci].right = d.logo[d.ci].x + d.logo[d.ci].width;\n\t\td.history.saveState();\n\t}\n\td.input('hauteurImageSetting').elt.onchange = function() {\n\t\td.slider('hauteurImage').value(this.value);\n\t\td.logo[d.ci].height = this.value;\n\t\td.logo[d.ci].bottom = d.logo[d.ci].y + d.logo[d.ci].height;\n\t\td.history.saveState();\n\t}\n\td.input('xTexteSetting').elt.onchange = function() {\n\t\td.slider('xTexte').value(this.value);\n\t\td.text[d.ct].x = this.value;\n\t\td.history.saveState();\n\t}\n\td.input('yTexteSetting').elt.onchange = function() {\n\t\td.slider('yTexte').value(this.value);\n\t\td.text[d.ct].y = this.value;\n\t\td.history.saveState();\n\t}\n\td.input('largeurTexteSetting').elt.onchange = function() {\n\t\td.slider('largeurTexte').value(this.value);\n\t\td.text[d.ct].width = this.value;\n\t\td.text[d.ct].right = d.text[d.ct].x + d.text[d.ct].width;\n\t\td.history.saveState();\n\t}\n\td.input('hauteurTexteSetting').elt.onchange = function() {\n\t\td.slider('hauteurTexte').value(this.value);\n\t\td.text[d.ct].height = this.value;\n\t\td.text[d.ct].bottom = d.text[d.ct].y + d.text[d.ct].height;\n\t\td.history.saveState();\n\t}\n\td.input('ratio').elt.onchange = function() {\n\t\td.conserverRatio = this.checked;\n\t}\n\td.textarea('first').elt.onfocus = function() {\n\t\tif (this.value == 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\tdocument.onkeydown = function(e) {\n\t\t////////////////////////////////////////\n\t\t//pour détecter les raccourcis clavier//\n\t\t////////////////////////////////////////\n\t\tconst evtobj = window.event ? event : e;\n\t\tif (d.OSName == \"Windows\" || d.OSName == \"Linux\" || d.OSName == \"UNIX\") {\n\t\t\tif (evtobj.keyCode == 90 && evtobj.ctrlKey) {\n\t\t\t\td.history.undo();\n\t\t\t}\n\t\t\tif (evtobj.keyCode == 90 && evtobj.ctrlKey && evtobj.shiftKey) {\n\t\t\t\td.history.redo();\n\t\t\t}\n\t\t}\n\t\tif (d.OSName == \"MacOS\") {\n\t\t\tif (evtobj.keyCode == 90 && evtobj.metaKey && !evtobj.shiftKey) {\n\t\t\t\td.history.undo();\n\t\t\t}\n\t\t\tif (evtobj.keyCode == 90 && evtobj.metaKey && evtobj.shiftKey) {\n\t\t\t\td.history.redo();\n\t\t\t}\n\t\t}\n\t\tif (evtobj.keyCode == 8 && evtobj.shiftKey) {\n\t\t\tif (d.ci > 1) {\n\t\t\t\td.ci--;\n\t\t\t\td.logo.pop();\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction draw() {\n\t/////////////////////////////////////\n\t//initialisation à chaque itération//\n\t/////////////////////////////////////\n\tlet inSquare;\n\td.canvasOffset = d.canvas.position();\n\td.offsetX = d.canvasOffset.x;\n\td.offsetY = d.canvasOffset.y;\n\td.Position();\n\tbackground(200);\n\tbackground(d.fond);\n\ttextFont(d.font);\n\ttextAlign(CENTER);\n\ttranslate(width / 2, height / 2);\n\t///////////////////////////////////////////////////////////////////////////////\n\t//s'il n'y a pas eu de modifications depuis le début du chargement de la page//\n\t///////////////////////////////////////////////////////////////////////////////\n\tif (!d.droped && d.textarea('first').value() == 'Ajoutez du texte sur votre CUSTOM !') {\n\t\ttextSize(d.text[d.ct].fontSize);\n\t\ttext('drop une image !', 0, 0);\n\t}\n\t////////////////////\n\t//gestion du texte//\n\t////////////////////\n\tif (d.textarea('first').value() != 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t//pour tous les textes\n\t\td.text.forEach(function(e) {\n\t\t\tpush();\n\t\t\trotate(e.aRot);\n\t\t\tfill(e.textColor[0], e.textColor[1], e.textColor[2]);\n\t\t\ttextSize(e.fontSize);\n\t\t\te.content = d.textareas[e.nb].value();\n\t\t\te.width = Math.max.apply(null, escape(e.content).split('%0A').map(w => textWidth(w)));\n\t\t\te.height = escape(e.content).split('%0A').length * e.fontSize * 1.2;\n\t\t\te.right = e.x + e.width;\n\t\t\te.bottom = e.y + e.height;\n\t\t\ttext(e.content, e.x - width / 2, e.y - height / 2, e.width, e.height);\n\t\t\tif (e.hitText(d.startX, d.startY)) {\n\t\t\t\te.drawDragging(e.x - width / 2, e.y - height / 2, e.right - width / 2, e.bottom - height / 2);\n\t\t\t}\n\t\t\tpop();\n\t\t\tpush();\n\t\t\ttextSize(15);\n\t\t\tif (e.draggingResizerText > -1) {\n\t\t\t\ttext(Math.floor(e.width) + \" x \" + Math.floor(e.height), e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t} else if (e.hitText(d.startX, d.startY) && e.content != 'Ajoutez du texte sur votre CUSTOM !') {\n\t\t\t\ttext(\"(\" + Math.floor(e.x) + \" ,\" + Math.floor(e.y) + \")\", e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t}\n\t\t\tpop();\n\t\t\tinSquare |= (e.x < (width / 4 + 15) || e.right > (3 * width / 4 - 15) || e.y < (height / 4) || e.bottom > (0.85 * height));\n\t\t});\n\t}\n\t//////////////////////\n\t//gestion de l'image//\n\t//////////////////////\n\tif (d.droped) {\n\t\t//pour toutes les images\n\t\td.logo.forEach(function(e) {\n\t\t\tpush();\n\t\t\trotate(e.aRot);\n\t\t\td.ctx.drawImage(e.image, 0, 0, e.image.width, e.image.height, e.x - width / 2, e.y - height / 2, e.width, e.height);\n\t\t\tif (e.hitImage(d.startX, d.startY)) {\n\t\t\t\te.drawDragging(e.x - width / 2, e.y - height / 2, e.right - width / 2, e.bottom - height / 2);\n\t\t\t}\n\t\t\ttextSize(15);\n\t\t\tif (e.draggingResizer > -1) {\n\t\t\t\ttext(Math.floor(e.width) + \" x \" + Math.floor(e.height), e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t} else if (e.hitImage(d.startX, d.startY) && e.image.src != \"\") {\n\t\t\t\ttext(\"(\" + Math.floor(e.x) + \" ,\" + Math.floor(e.y) + \")\", e.x - width / 2, e.y - 20 - height / 2);\n\t\t\t}\n\t\t\tpop();\n\t\t\tif (d.logo[d.ci].src != '') {\n\t\t\t\tinSquare |= (e.x < (width / 4 + 15) || e.right > (3 * width / 4 - 15) || e.y < (height / 4) || e.bottom > (0.85 * height));\n\t\t\t}\n\t\t});\n\t}\n\t////////////////////////////////////////\n\t//gesetion des sliders \"en temps réel\"//\n\t////////////////////////////////////////\n\tif (d.outOfCanvas) {\n\t\t//on change la rotation de l'image\n\t\td.logo[d.ci].xRot = cos(d.slider('orientationImage').value() * 0.017453292519943);\n\t\td.logo[d.ci].yRot = sin(d.slider('orientationImage').value() * 0.017453292519943);\n\t\td.logo[d.ci].aRot = atan2(d.logo[d.ci].yRot, d.logo[d.ci].xRot);\n\t\t//on change la position de l'image\n\t\td.logo[d.ci].x = d.slider('xImage').value();\n\t\td.logo[d.ci].y = d.slider('yImage').value();\n\t\td.logo[d.ci].width = d.slider('largeurImage').value();\n\t\td.logo[d.ci].height = d.slider('hauteurImage').value();\n\t\t//on actualise les contours\n\t\td.logo[d.ci].right = d.logo[d.ci].x + d.logo[d.ci].width;\n\t\td.logo[d.ci].bottom = d.logo[d.ci].y + d.logo[d.ci].height;\n\t\t//on change la rotation du texte\n\t\td.text[d.ct].xRot = cos(d.slider('orientationTexte').value() * 0.017453292519943);\n\t\td.text[d.ct].yRot = sin(d.slider('orientationTexte').value() * 0.017453292519943);\n\t\td.text[d.ct].aRot = atan2(d.text[d.ct].yRot, d.text[d.ct].xRot);\n\t\t//on change la position de l'image\n\t\td.text[d.ct].x = d.slider('xTexte').value();\n\t\td.text[d.ct].y = d.slider('yTexte').value();\n\t\td.text[d.ct].width = d.slider('largeurTexte').value();\n\t\td.text[d.ct].height = d.slider('hauteurTexte').value();\n\t\td.text[d.ct].fontSize = d.slider('tailleTexte').value();\n\t\t//on actualise les contours\n\t\td.text[d.ct].right = d.text[d.ct].x + d.text[d.ct].width;\n\t\td.text[d.ct].bottom = d.text[d.ct].y + d.text[d.ct].height;\n\t} else {\n\t\td.sliders.forEach(function(e) {\n\t\t\t//console.log(e.elt.parentElement);\n\t\t\te.elt.parentElement.nextElementSibling.firstChild.value = e.value();\n\t\t});\n\t}\n\t///////////////////////\n\t//gestion des flèches//\n\t///////////////////////\n\tif (keyIsDown(LEFT_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {\n\t\t\tif (d.aImage < 360) d.aImage += 0.1;\n\t\t\tif (d.aImage >= 360) d.aImage = 360;\n\t\t} else {\n\t\t\td.logo[d.ci].x -= 2;\n\t\t\td.logo[d.ci].right -= 2;\n\t\t}\n\t}\n\tif (keyIsDown(RIGHT_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {\n\t\t\tif (d.aImage > 0) d.aImage -= 0.1;\n\t\t\tif (d.aImage <= 0) d.aImage = 0;\n\t\t} else {\n\t\t\td.logo[d.ci].x += 2;\n\t\t\td.logo[d.ci].right += 2;\n\t\t}\n\t}\n\tif (keyIsDown(UP_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {} else {\n\t\t\td.logo[d.ci].y -= 2;\n\t\t\td.logo[d.ci].bottom -= 2;\n\t\t}\n\t}\n\tif (keyIsDown(DOWN_ARROW)) {\n\t\tif (keyIsDown(ENTER)) {} else {\n\t\t\td.logo[d.ci].y += 2;\n\t\t\td.logo[d.ci].bottom += 2;\n\t\t}\n\t}\n\t///////////////////////////////////////////\n\t//délimitation de l'espace pour les logos//\n\t///////////////////////////////////////////\n\tif (inSquare) {\n\t\tstroke(255, 0, 0);\n\t} else {\n\t\tstroke(0, 0, 0);\n\t}\n\tfill(0, 0, 0, 0);\n\trect(-width / 4 + 15, -height / 4, width / 2 - 30, height / 2 + 0.1 * height);\n\tif (d.input('quadrillage').elt.checked || d.input('quadrillageTexte').elt.checked) {\n\t\tpush();\n\t\tstroke(0, 0, 0);\n\t\tstrokeWeight(0.15);\n\t\tline(0, -height / 2, 0, height / 2);\n\t\tline(-width / 3, -height / 2, -width / 3, height / 2);\n\t\tline(width / 3, -height / 2, width / 3, height / 2);\n\t\tline(-width / 6, -height / 2, -width / 6, height / 2);\n\t\tline(width / 6, -height / 2, width / 6, height / 2);\n\t\tline(-width, height / 6, width, height / 6);\n\t\tline(-width, height / 3, width, height / 3);\n\t\tline(-width, -height / 3, width, -height / 3);\n\t\tline(-width, -height / 6, width, -height / 6);\n\t\tline(-width, 0, width, 0);\n\t\tpop();\n\t}\n}\n"]}