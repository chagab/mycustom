{"version":3,"sources":["gestionModal.es6"],"names":["$","staticBackURL","staticLogoURL","staticPlayLogoURL","errorMessage","csrftoken","getCookie","__DATA__","type","name","cookieValue","document","cookie","cookies","split","i","length","jQuery","trim","substring","decodeURIComponent","csrfSafeMethod","method","test","sameOrigin","url","host","location","protocol","sr_origin","origin","slice","ajaxSetup","beforeSend","xhr","settings","setRequestHeader","each","one","modalBody","nextElementSibling","children","categorie","attr","__URL__","get","JSON","parse","data","filter","elt","fields","confirm","forEach","e","append","taille","nombre_colonnes","nombre_offset","logo","pk","propositionLogo","parentElement","propositionTextile","propositionTextileCenter","__URL2__","fadeOut","presentationTextil","css","fadeIn","console","log","click","fail","id","type_contour","epaisseur_contour","couleur_contour","contour_arrondi","couleur_text","couleur_fond","nom","couleur_fond_image","contour_arrondi_image","face_style","prix","text_description_short","event","presentationTextilDetail","video_mp4","video_webm","dos_style","gauche_style","droite_style","num","mouseenter","previousElementSibling","video","hasClass","videoElt","pause","currentTime","load","fadeTo","src","attributes","nodeValue","produitDetail","find","value","on"],"mappings":"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","file":"gestionModal-compiled.js","sourcesContent":["/* gestion des modals de la partie customiser  */\n$(function() {\n\t//path to the needed images\n\tconst staticBackURL = \"/static/mainPage/image/icons8-Back-26.png\";\n\tconst staticLogoURL = \"/static/mainPage/image/logo%20my%20custom%20by%20NF%20blanc.png\";\n\tconst staticPlayLogoURL = \"/static/mainPage/image/icons8-Circled Play Filled-50.png\";\n\tconst errorMessage = \"<p>Sorry, something went wrong...</p>\";\n\tconst csrftoken = getCookie('csrftoken');\n\tconst __DATA__ = {\n\t\t'csrfmiddlewaretoken': csrftoken,\n\t\ttype: \"POST\",\n\t};\n\t//function to generate the crsf\n\tfunction getCookie(name) {\n\t\tlet cookieValue = null;\n\t\tif (document.cookie && document.cookie != '') {\n\t\t\tlet cookies = document.cookie.split(';');\n\t\t\tfor (let i = 0; i < cookies.length; i++) {\n\t\t\t\tconst cookie = jQuery.trim(cookies[i]);\n\t\t\t\t// Does this cookie string begin with the name we want?\n\t\t\t\tif (cookie.substring(0, name.length + 1) == (name + '=')) {\n\t\t\t\t\tcookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn cookieValue;\n\t}\n\n\tfunction csrfSafeMethod(method) {\n\t\t// these HTTP methods do not require CSRF protection\n\t\treturn (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n\t}\n\n\tfunction sameOrigin(url) {\n\t\t// test that a given url is a same-origin URL\n\t\t// url could be relative or scheme relative or absolute\n\t\tconst host = document.location.host; // host + port\n\t\tconst protocol = document.location.protocol;\n\t\tconst sr_origin = '//' + host;\n\t\tconst origin = protocol + sr_origin;\n\t\t// Allow absolute or scheme relative URLs to same origin or any other URL that isn't scheme relative or absolute i.e relative.\n\t\treturn (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||\n\t\t\t(url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||\n\t\t\t!(/^(\\/\\/|http:|https:).*/.test(url));\n\t}\n\n\t$.ajaxSetup({\n\t\tbeforeSend: function(xhr, settings) {\n\t\t\tif (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {\n\t\t\t\t// Send the token to same-origin, relative URLs only.\n\t\t\t\t// Send the token only if the method warrants CSRF protection\n\t\t\t\t// Using the CSRFToken value acquired earlier\n\t\t\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n\t\t\t}\n\t\t}\n\t});\n\n\t///////////////////////\n\t//for the logo modal //\n\t///////////////////////\n\t$('.categorie_achat').each(function() {\n\t\t$(this).one(\"click\", function() {\n\t\t\tconst modalBody = $(this.nextElementSibling.children[0].children[0].children[0].nextElementSibling.children[0].children[0]);\n\t\t\tconst categorie = $(this).attr('name');\n\t\t\tconst __URL__ = `achat/addLogo/${categorie}/`;\n\t\t\t$.get(__URL__, __DATA__, data => {\n\t\t\t\t\tJSON.parse(data).filter(elt => elt.fields.confirm).forEach(elt => {\n\t\t\t\t\t\tconst e = elt.fields;\n\t\t\t\t\t\tmodalBody.append(`\n\t\t\t\t\t<div class=\"col-${e.taille}-${e.nombre_colonnes} col-${e.taille}-offset-${e.nombre_offset} logo animation_ease-slow\" style=\"height: 250px; vertical-align:middle; line-height: 250px;\">\n\t\t\t\t\t\t<img src=\"/media/${e.logo}\" id=\"logo_${elt.pk}\" style=\"max-width: 100%; max-height: 100%;\">\n\t\t\t\t\t</div>\n\t\t\t\t\t`);\n\t\t\t\t\t\t$(`#logo_${elt.pk}`).one(\"click\", function() {\n\t\t\t\t\t\t\tconst propositionLogo = $(this.parentElement.parentElement);\n\t\t\t\t\t\t\tconst propositionTextile = $(this.parentElement.parentElement.parentElement.nextElementSibling);\n\t\t\t\t\t\t\tconst propositionTextileCenter = $(this.parentElement.parentElement.parentElement.nextElementSibling.children[0]);\n\t\t\t\t\t\t\tconst __URL2__ = \"achat/addTextil/\";\n\t\t\t\t\t\t\tconst type = \"logo\";\n\t\t\t\t\t\t\tpropositionLogo.fadeOut(0);\n\t\t\t\t\t\t\t$.get(__URL2__, __DATA__, data => {\n\t\t\t\t\t\t\t\t\tJSON.parse(data).filter(elt => elt.fields.confirm).forEach(elt => {\n\t\t\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t\t\t\t\tFIXME : this features doesn't work properly => can be quite difficult to fixed :(\n\t\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t\tpresentationTextil(propositionTextileCenter, elt, type);\n\t\t\t\t\t\t\t\t\t\tpropositionTextile.css({\n\t\t\t\t\t\t\t\t\t\t\t'display': 'block',\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tpropositionTextile.fadeIn(0);\n\t\t\t\t\t\t\t\t\t\tconsole.log('fermer', propositionTextile.children('.fermerLogo'));\n\t\t\t\t\t\t\t\t\t\tpropositionTextile.children('.fermerLogo').click(function() {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('click');\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('propositionTextile', propositionTextile);\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('propositionLogo', propositionLogo);\n\t\t\t\t\t\t\t\t\t\t\tpropositionTextile.fadeOut(0);\n\t\t\t\t\t\t\t\t\t\t\tpropositionLogo.fadeIn(0);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\t\t\tmodalBody.append(errorMessage);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(() => {\n\t\t\t\t\tmodalBody.append(errorMessage);\n\t\t\t\t});\n\t\t});\n\t});\n\n\t///////////////////////////\n\t// for the textile modal //\n\t///////////////////////////\n\t$('.categorie').each(function() {\n\t\t//when the user click on a textile, we request the database the infos about all the matching textile\n\t\t//and append some html to the modal body. Hence, we want to do this only once !\n\t\t$(this).one(\"click\", function() {\n\t\t\tconst modalBody = $(this.nextElementSibling.children[0].children[0].children[0].nextElementSibling);\n\t\t\tconst attr = $(this).attr('id');\n\t\t\tconst type = attr.split(\"_\")[0];\n\t\t\tconst id = attr.split(\"_\")[1];\n\t\t\t//redirect to the corresponding url to match ether categorie or produit textile\n\t\t\tconst __URL__ = (type => {\n\t\t\t\tif (type == \"categorie\") return `achat/addTextilCategorie/${id}/`;\n\t\t\t\telse if (type == \"produit\") return `achat/addTextilProduit/${id}/`;\n\t\t\t})(type);\n\t\t\t$.get(__URL__, __DATA__, data => {\n\t\t\t\t\t//on succes, show every element that we requested\n\t\t\t\t\tJSON.parse(data).filter(elt => elt.fields.confirm).forEach(elt => {\n\t\t\t\t\t\tpresentationTextil(modalBody, elt, type);\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(() => {\n\t\t\t\t\t//on fail, append a message error\n\t\t\t\t\tmodalBody.append(errorMessage);\n\t\t\t\t});\n\t\t});\n\t});\n\n\tfunction presentationTextil(location, elt, type) {\n\t\tconst e = elt.fields;\n\t\t//function that show up all the textil matching the user request (=> click on a categorie or produit)\n\t\tlocation.append(`\n\t\t\t<div class=\"produit animation_ease col-${e.taille}-offset-${e.nombre_offset} col-${e.taille}-${e.nombre_colonnes}\" style=\"display:block;border:${e.type_contour} ${e.epaisseur_contour}px ${e.couleur_contour};border-radius:${e.contour_arrondi}px;color:${e.couleur_text};background-color:${e.couleur_fond}\">\n\t\t\t\t<center>\n\t\t\t\t\t<h3 class=\"myfont\">${e.nom}</h3>\n\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t<a type=\"button\" style=\"cursor: pointer;\">\n\t\t\t\t\t\t\t<img class=\"resize_width adjust_height produitImage\" id=\"produitImage_${elt.pk}_${type}\" style=\"background-color:${e.couleur_fond_image}; border-radius:${e.contour_arrondi_image}px;height:400px;width:auto;cursor:pointer;\" src=\"media/${e.face_style}\">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br><br>\n\t\t\t\t\t<p class=\"myfont\">${e.prix}€</p>\n\t\t\t\t\t<p class=\"myfont\">${e.text_description_short}</p>\n\t\t\t\t</center>\n\t\t\t</div>\n\t\t`);\n\t\t$(`#produitImage_${elt.pk}_${type}`).one(\"click\", function(event) {\n\t\t\t//if this is the first titme the user click on a textil : we append the detail to the modal body\n\t\t\t//and hide all the other textiles\n\t\t\tpresentationTextilDetail(elt, location, type);\n\t\t\tlocation.children('.produit').fadeOut(0);\n\t\t\t//then we attach an event for the next time the user might want to see any detail of this specific\n\t\t\t//textile\n\t\t\t$(this).click(function() {\n\t\t\t\t$('.produit').fadeOut(0);\n\t\t\t\t$(`#produitDetail_${elt.pk}_${type}`).fadeIn(0);\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction presentationTextilDetail(elt, location, type) {\n\t\tconst e = elt.fields;\n\t\t//function that show all the detail of one specific textile\n\t\tlocation.append(`\n\t\t\t<div class=\"produitDetail\" id=\"produitDetail_${elt.pk}_${type}\">\n\t\t\t\t<p class=\"myfont-lg\">${e.text_description_short} : ${e.prix}€</p>\n\t\t\t\t<div class=\"col-xs-10\" style=\"border: solid 1px gray; border-radius: 10px 0 0 10px;\">\n\t\t\t\t\t<img id=\"image_${elt.pk}_${type}\" class=\"produitImage droite\" style=\"height :600px; width: auto;background-color: ${e.couleur_fond_image};\" src=\"media/${e.face_style}\">\n\t\t\t\t\t<div style=\"padding : 100px 0 100px 0; display : none;overflow: scroll;\">\n\t\t\t\t\t\t<video controls poster=\"media/${e.face_style}\" height=\"395\" width=\"auto\">\n\t\t\t\t\t\t\t<source src=\"media/${e.video_mp4}\">\n\t\t\t\t\t\t\t<source src=\"media/${e.video_webm}\">\n\t\t\t\t\t\t\tCette video n'est pas supportée sur votre navigateur...\n\t\t\t\t\t\t</video>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-xs-2\" style=\"border: solid 1px gray; border-radius:0 10px 10px 0;\">\n\t\t\t\t\t<div id=\"first_${elt.pk}_${type}\" class=\"produitImage droite\" style=\"background-color: ${e.couleur_fond_image}; background-image: url('media/${e.face_style}')\" src=\"media/${e.face_style}\"></div>\n\t\t\t\t\t<div class=\"produitImage droite\" style=\"background-color: ${e.couleur_fond_image}; background-image: url('media/${e.dos_style}')\" src=\"media/${e.dos_style}\"></div>\n\t\t\t\t\t<div class=\"produitImage droite\" style=\"background-color: ${e.couleur_fond_image}; background-image: url('media/${e.gauche_style}')\" src=\"media/${e.gauche_style}\"></div>\n\t\t\t\t\t<div class=\"produitImage droite\" style=\"background-color: ${e.couleur_fond_image}; background-image: url('media/${e.droite_style}')\" src=\"media/${e.droite_style}\"></div>\n\t\t\t\t\t<div class=\"produitImage droite video\" style=\"background-color: ${e.couleur_fond_image}; background-image: url('media/${e.face_style}')\" src=\"media/${e.face_style}\"><img src=\"${staticPlayLogoURL}\" style=\"padding-top: 25px;\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t<button class=\"fermer\" style=\"margin-top: 10px;\"><img style=\"height: 40px; width: auto;\" src=${staticBackURL}></button>\n\t\t\t\t\t<a href=\"TshirtDesigner/designer/${e.num}\" style=\"margin-top: 10px;\"><button>Customiser ! <img style=\"height: 40px; width: auto;\" src=${staticLogoURL}></button></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t\t//we then attach some event to manage the user's click to go back to the proposition, change the cureent dislayed\n\t\t//image, display the video\n\t\t$('.droite').each(function() {\n\t\t\t$(this)\n\t\t\t\t.mouseenter(function() {\n\t\t\t\t\tlet elt = $(this.parentElement.previousElementSibling.children)[0];\n\t\t\t\t\tlet video = $(this.parentElement.previousElementSibling.children)[1];\n\t\t\t\t\tif ($(this).hasClass('video')) {\n\t\t\t\t\t\t$(elt).fadeOut(0);\n\t\t\t\t\t\t$(video).fadeIn(400);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst videoElt = $(video).children()[0];\n\t\t\t\t\t\tvideoElt.pause();\n\t\t\t\t\t\tvideoElt.currentTime = 0;\n\t\t\t\t\t\tvideoElt.load();\n\t\t\t\t\t\t$(elt).fadeTo(100, 0, () => {\n\t\t\t\t\t\t\t$(video).fadeOut(0);\n\t\t\t\t\t\t\telt.src = this.attributes.src.nodeValue;\n\t\t\t\t\t\t\t$(elt).fadeTo(100, 1);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t\t$('.fermer').each(function() {\n\t\t\t$(this).click(function() {\n\t\t\t\tconst produitDetail = $(this.parentElement.parentElement);\n\t\t\t\tproduitDetail.find('video').each(function() {\n\t\t\t\t\tthis.pause();\n\t\t\t\t\tthis.currentTime = 0;\n\t\t\t\t\tthis.load();\n\t\t\t\t\t$(this.parentElement).fadeOut(0);\n\t\t\t\t});\n\t\t\t\tproduitDetail.fadeOut(0);\n\t\t\t\t$('.produit').fadeIn(400);\n\t\t\t\t$(`#image_${elt.pk}_${type}`).fadeIn(0);\n\t\t\t\t$(`#image_${elt.pk}_${type}`)[0].src = $(`#first_${elt.pk}_${type}`)[0].attributes.src.value;\n\t\t\t});\n\t\t});\n\t\t$('.modal').each(function() {\n\t\t\t$(this).on('hidden.bs.modal', function() {\n\t\t\t\t$(this).find('video').each(function() {\n\t\t\t\t\tthis.pause();\n\t\t\t\t\tthis.currentTime = 0;\n\t\t\t\t\tthis.load();\n\t\t\t\t\t$(this.parentElement).fadeOut(0);\n\t\t\t\t});\n\t\t\t\t$('.produitDetail').each(function() {\n\t\t\t\t\t$(this).fadeOut(0);\n\t\t\t\t});\n\t\t\t\t$('.produit').fadeIn(0);\n\t\t\t\t$(`#image_${elt.pk}_${type}`).fadeIn(0);\n\t\t\t\t$(`#image_${elt.pk}_${type}`)[0].src = $(`#first_${elt.pk}_${type}`)[0].attributes.src.value;\n\t\t\t});\n\t\t});\n\t}\n});\n"]}